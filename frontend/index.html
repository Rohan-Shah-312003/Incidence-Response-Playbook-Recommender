<!doctype html>
<html>
	<head>
		<meta charset="UTF-8" />
		<title>IRPR – Incident Response Assistant</title>
		<style>
			body {
				font-family: Arial, sans-serif;
				padding: 20px;
				background: #0f172a;
				color: #e5e7eb;
			}
			textarea {
				width: 100%;
				height: 120px;
				font-size: 14px;
				background: #1e293b;
				color: #e5e7eb;
				border: 1px solid #334155;
				padding: 10px;
				border-radius: 5px;
			}
			button {
				margin-top: 10px;
				padding: 10px 20px;
				font-size: 16px;
				cursor: pointer;
				background: #3b82f6;
				color: white;
				border: none;
				border-radius: 5px;
			}
			button:hover {
				background: #2563eb;
			}
			.result {
				margin-top: 20px;
				white-space: pre-wrap;
				background: #020617;
				padding: 15px;
				border-radius: 5px;
			}
			.tabs {
				margin-top: 20px;
			}

			.tab-btn {
				background: #1e293b;
				color: #e5e7eb;
				border: none;
				padding: 10px 15px;
				cursor: pointer;
				margin-right: 5px;
				border-radius: 5px 5px 0 0;
			}

			.tab-btn.active {
				background: #334155;
			}

			.tab-btn:hover {
				background: #334155;
			}

			.tab-content {
				display: none;
				margin-top: 0;
				padding: 15px;
				background: #020617;
				border-radius: 0 5px 5px 5px;
				white-space: pre-wrap;
				min-height: 200px;
			}

			.tab-content.active {
				display: block;
			}

			/* ✅ NEW: Markdown styling for rendered content */
			.markdown-content {
				white-space: normal; /* Allow normal text wrapping for markdown */
				line-height: 1.6;
			}

			.markdown-content h1,
			.markdown-content h2,
			.markdown-content h3 {
				color: #60a5fa;
				margin-top: 1em;
				margin-bottom: 0.5em;
			}

			.markdown-content h1 {
				font-size: 1.8em;
				border-bottom: 2px solid #334155;
				padding-bottom: 0.3em;
			}

			.markdown-content h2 {
				font-size: 1.5em;
			}

			.markdown-content h3 {
				font-size: 1.2em;
			}

			.markdown-content p {
				margin: 0.8em 0;
			}

			.markdown-content ul,
			.markdown-content ol {
				margin: 0.8em 0;
				padding-left: 2em;
			}

			.markdown-content li {
				margin: 0.4em 0;
			}

			.markdown-content strong {
				color: #fbbf24;
				font-weight: bold;
			}

			.markdown-content em {
				color: #a78bfa;
				font-style: italic;
			}

			.markdown-content code {
				background: #1e293b;
				padding: 0.2em 0.4em;
				border-radius: 3px;
				font-family: "Courier New", monospace;
				color: #34d399;
			}

			.markdown-content pre {
				background: #1e293b;
				padding: 1em;
				border-radius: 5px;
				overflow-x: auto;
				margin: 1em 0;
			}

			.markdown-content pre code {
				background: none;
				padding: 0;
			}

			.markdown-content blockquote {
				border-left: 4px solid #3b82f6;
				padding-left: 1em;
				margin: 1em 0;
				color: #9ca3af;
			}

			.markdown-content a {
				color: #60a5fa;
				text-decoration: none;
			}

			.markdown-content a:hover {
				text-decoration: underline;
			}

			.override-section {
				margin-top: 20px;
				padding-top: 20px;
				border-top: 1px solid #334155;
			}

			.override-section textarea {
				height: 80px;
				margin-bottom: 10px;
			}

			.export-section {
				margin-top: 20px;
			}
		</style>
	</head>

	<body>
		<h2>IRPR – Incident Response Assistant</h2>

		<textarea
			id="incidentInput"
			placeholder="Paste incident description here..."
		></textarea>

		<button onclick="analyze()">Analyze Incident</button>

		<div class="tabs">
			<button
				class="tab-btn active"
				onclick="openTab('situation', event)"
			>
				Situation
			</button>
			<button class="tab-btn" onclick="openTab('plan', event)">
				Response Plan
			</button>
			<button class="tab-btn" onclick="openTab('rationale', event)">
				Rationale
			</button>
			<button class="tab-btn" onclick="openTab('evidence', event)">
				Evidence
			</button>
		</div>

		<div id="situation" class="tab-content active">
			Click "Analyze Incident" to begin...
		</div>

		<div id="plan" class="tab-content">
			<div id="planContent"></div>

			<div class="override-section">
				<h3>Analyst Override</h3>
				<textarea
					id="overrideNote"
					placeholder="Enter override note if you disagree with the recommendation..."
				></textarea>
				<button onclick="submitOverride()">Submit Override</button>
			</div>
		</div>

		<div id="rationale" class="tab-content"></div>

		<div id="evidence" class="tab-content"></div>

		<div class="export-section">
			<button onclick="exportReport()">Export Report (PDF)</button>
		</div>

		<!-- ✅ Load marked library BEFORE renderer.js -->
		<!-- <script src="node_modules/marked/bin/marked.js"></script> -->
		<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
		<script src="renderer.js"></script>
	</body>
</html>
